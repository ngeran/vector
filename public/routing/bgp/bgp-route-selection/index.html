<!DOCTYPE html>
<html lang="en-us" dir="ltr" class="scroll-smooth">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
<meta name="robots" content="noindex, nofollow" />
<title>
Route Selection | ngeran[io]
</title>

    <link rel="stylesheet" href="/css/styles.css">


      <script src="/js/main.js"></script>


</head>
<body class="flex flex-col h-screen px-6 m-auto leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-gray-900 dark:text-neutral sm:px-14 md:px-24 lg:px-32 scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600">
  <header>
    <div class="fixed inset-x-0 pl-[24px] pr-[24px]" style="z-index:100">
  <nav class="relative max-w-[64rem] ml-auto mr-auto top-3 p-4  lg:px-8  lg:py-3 shadow-lg bg-[#d8dee9] bg-opacity-10 backdrop-blur-lg backdrop-saturate-150 z-50 rounded-2xl  ">
    <div class="mx-auto flex items-center justify-between">
      
      <div class=" text-xl ">
       <a href="/" class="text-xl" ><span class="text-[#eceff4] ">ngeran</span><span class="text-[#81a1c1]">[</span><span class="text-[#ebcb8b]">io</span><span class="text-[#81a1c1]">]</span>
        </a>
      </div>
  
      
      <div class="hidden lg:flex space-x-6 ">
        
          <div class="relative group">
            <a href="/" class=" text-[#d8dee9] hover:text-[#ebcb8b] h-full">home</a>
            
            
          </div>
        
          <div class="relative group">
            <a href="" class=" text-[#d8dee9] hover:text-[#ebcb8b] h-full">posts</a>
            
            
 
              <div class="absolute  left-0 hidden p-4 mt-0 space-y-2 bg-gray-700  group-hover:block rounded-md bg-opacity-10 backdrop-blur-lg">
                
                  <div>
                    <a href="/routing/bgp/" class="text-[#d8dee9] hover:text-[#ebcb8b]">bgp</a>
                  </div>
                
                  <div>
                    <a href="/routing/ospf/" class="text-[#d8dee9] hover:text-[#ebcb8b]">o.s.p.f</a>
                  </div>
                
              </div>
            
          </div>
        
          <div class="relative group">
            <a href="" class=" text-[#d8dee9] hover:text-[#ebcb8b] h-full">projects</a>
            
            
          </div>
        
      </div>
  
      
      <div class="lg:hidden">
        <button id="hamburger" class="block text-[#5e81ac] focus:outline-none">
          <div class="w-6 h-0.5 bg-white mb-1 transition-all duration-300" id="bar1"></div>
          <div class="w-6 h-0.5 bg-white mb-1 transition-all duration-300" id="bar2"></div>
          <div class="w-6 h-0.5 bg-white transition-all duration-300" id="bar3"></div>
        </button>
      </div>
    </div>
  
    
    <div id="mobileMenu" class="lg:hidden hidden bg-gray-800">
      <div class="p-4">
        
          <div class="relative group">
            <a href="/" class="block py-2 px-4 text-[#5e81ac] hover:bg-gray-700 rounded">home</a>
  
            
          </div>
        
          <div class="relative group">
            <a href="" class="block py-2 px-4 text-[#5e81ac] hover:bg-gray-700 rounded">posts</a>
  
            
              <div class="hidden mt-2 space-y-2 bg-gray-700 p-4 group-hover:block">
                
                  <div>
                    <a href="/routing/bgp/" class="block py-2 px-4 text-[#5e81ac] hover:bg-gray-600 rounded">bgp</a>
                  </div>
                
                  <div>
                    <a href="/routing/ospf/" class="block py-2 px-4 text-[#5e81ac] hover:bg-gray-600 rounded">o.s.p.f</a>
                  </div>
                
              </div>
            
          </div>
        
          <div class="relative group">
            <a href="" class="block py-2 px-4 text-[#5e81ac] hover:bg-gray-700 rounded">projects</a>
  
            
          </div>
        
      </div>
    </div>
  </nav>

</div>



  
  
  <script>
    const hamburger = document.getElementById("hamburger");
    const bars = [document.getElementById("bar1"), document.getElementById("bar2"), document.getElementById("bar3")];
    const mobileMenu = document.getElementById("mobileMenu");
  
    hamburger.addEventListener("click", () => {
      
      mobileMenu.classList.toggle("hidden");
  
      
      bars[0].classList.toggle("rotate-45", mobileMenu.classList.contains("hidden"));
      bars[1].classList.toggle("opacity-0", mobileMenu.classList.contains("hidden"));
      bars[2].classList.toggle("rotate-135", mobileMenu.classList.contains("hidden"));
    });
  </script>
  
  
  </header>
  <div class="relative flex flex-col grow">
    <main class="grow">
      <article>
        <div id="hero" class="h-[150px] md:h-[200px]"></div>
        
       
        
        <header class="mt-5 max-w-prose">
          <h1 class="mt-0 text-4xl font-extrabold text-[#5e81ac] dark:text-neutral">Route Selection</h1>
          <div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
            <div class="flex flex-row flex-wrap items-center">
              
              
              <time datetime="2024-12-01T09:15:27-05:00">December 1, 2024</time> 
              <span class="px-2 text-primary-500">.</span>
              <span>187 words</span>
              <span class="px-2 text-primary-500">.</span>
              <span>1 minutes</span>
            </div>
            <div class="flex flex-row flex-wrap items-center">
              
              


            </div>
          </div>
          
          <div class="flex author">
             
            
            <img class="!mt-0 !mb-0 h-24 w-24 rounded-full ltr:mr-4 rtl:ml-4" width="96" height="96"
            alt="ngeranio a.k.a nikos" src="/author/avatar.png" />
    
            <div class="place-self-center">
              <div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">Author</div>
              <div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">ngeranio a.k.a nikos</div>
              <div class="text-2xl sm:text-lg"></div>
            </div>
          </div>
          <div class="mb-5"></div>
        </header>

        
        <section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row">
        
        <div class="order-first lg:ml-auto px-0 lg:order-last ltr:lg:pl-8 rtl:lg:pr-8">
          <div class=" ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-[140px]">
            <div class="mt-0 overscroll-contain scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600 rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 hidden lg:block">
                <div class="min-w-[220px] py-2 border-dotted list-none  ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600 text-sm">
                  <nav id="TableOfContents">
  <ul>
    <li><a href="#best-path-selection">Best Path Selection</a></li>
    <li><a href="#lowest-route-preference">Lowest Route Preference</a></li>
    <li><a href="#highest-local-prefence">Highest Local Prefence</a></li>
    <li><a href="#shortest-as-path">Shortest AS Path</a></li>
    <li><a href="#lowest-origin">Lowest Origin</a></li>
    <li><a href="#lowest-med">Lowest MED</a></li>
    <li><a href="#route-type">Route Type</a></li>
    <li><a href="#lowest-igp-cost">Lowest IGP cost</a></li>
    <li><a href="#lowest-r-id-or-oldest-active">Lowest R-ID or Oldest Active</a></li>
    <li><a href="#cluster-list">Cluster List</a></li>
    <li><a href="#lowest-peer-ip">Lowest Peer IP</a></li>
  </ul>
</nav>
                </div>
            </div>
          </div>
        </div>
        
      <div class="min-w-0 min-h-0 max-w-fit">
        <div class="article-content max-w-prose mb-20 prose-h3:text-[#5e81ac]">
           
        <blockquote>
<p>Before the router even starts the route selection process it needs to make sure that the route is valid, checks the <strong>Martian</strong> routes, <strong>AS loops</strong> and <strong>next-hop reachability</strong>.</p>
</blockquote>
<h2 id="best-path-selection">Best Path Selection</h2>
<table>
  <thead>
      <tr>
          <th style="text-align: left">Attribute</th>
          <th style="text-align: left">Preference</th>
          <th style="text-align: left">Default Behavior</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">1. Route Preference</td>
          <td style="text-align: left">Lowest</td>
          <td style="text-align: left">Default value is 170</td>
      </tr>
      <tr>
          <td style="text-align: left">2. Local Preference</td>
          <td style="text-align: left">Highest</td>
          <td style="text-align: left">Default learned value is 100</td>
      </tr>
      <tr>
          <td style="text-align: left">3. AS-Path</td>
          <td style="text-align: left">Shortest</td>
          <td style="text-align: left">Usualy the first time route selection occurs</td>
      </tr>
      <tr>
          <td style="text-align: left">4. Origin</td>
          <td style="text-align: left">Lowest</td>
          <td style="text-align: left">IGP (I) &gt;  EGP (E), EGP &gt; incomplete (?)</td>
      </tr>
      <tr>
          <td style="text-align: left">5. Multi Exit Discriminator (MED)</td>
          <td style="text-align: left">Lowest</td>
          <td style="text-align: left">Compared when routes are learned from the same AS</td>
      </tr>
      <tr>
          <td style="text-align: left">6. Route Type</td>
          <td style="text-align: left">External</td>
          <td style="text-align: left">Internal vs External, External prefered</td>
      </tr>
      <tr>
          <td style="text-align: left">7. IGP Cost</td>
          <td style="text-align: left">Lowest</td>
          <td style="text-align: left">lowest cost towards the BGP next-hop</td>
      </tr>
      <tr>
          <td style="text-align: left">8. Internal vs External</td>
          <td style="text-align: left">Lowest</td>
          <td style="text-align: left">Lowest R-ID,  Oldest active route</td>
      </tr>
      <tr>
          <td style="text-align: left">10. Cluster List</td>
          <td style="text-align: left">Shortest</td>
          <td style="text-align: left">When route reflection is used</td>
      </tr>
      <tr>
          <td style="text-align: left">11. Peer IP Address</td>
          <td style="text-align: left">Lowest</td>
          <td style="text-align: left">Multiple peerings between the same router</td>
      </tr>
  </tbody>
</table>
<blockquote>
<p>For JUNOS the route selection results and criteria can be seen in the output of:</p>
</blockquote>
<ul>
<li><strong>show route details</strong></li>
<li><strong>show route extensive</strong></li>
</ul>
<h2 id="lowest-route-preference">Lowest Route Preference</h2>
<h2 id="highest-local-prefence">Highest Local Prefence</h2>
<h2 id="shortest-as-path">Shortest AS Path</h2>
<h2 id="lowest-origin">Lowest Origin</h2>
<h2 id="lowest-med">Lowest MED</h2>
<h2 id="route-type">Route Type</h2>
<h2 id="lowest-igp-cost">Lowest IGP cost</h2>
<h2 id="lowest-r-id-or-oldest-active">Lowest R-ID or Oldest Active</h2>
<h2 id="cluster-list">Cluster List</h2>
<h2 id="lowest-peer-ip">Lowest Peer IP</h2>

         
        </div>
        
        <div class="flex justify-between">
  
  <div class="">
    
    <a
      href="http://localhost:1313/routing/bgp/fsm/?ref=footer"
      class="flex items-center justify-center px-3 h-8 me-3 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white"
    >
      <svg
        class="w-3.5 h-3.5 me-2 rtl:rotate-180"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 14 10"
      >
        <path
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M13 5H1m0 0 4 4M1 5l4-4"
        />
      </svg>
      Previous
    </a>
    
  </div>
  
  <div class="">
    
  </div>
</div>

      
      </div>
        </section>
      </article>
  
      </main>
  </div>
  <footer>
    <footer class="mx-auto w-full  max-w-container text-center" >
    
   <div class="max-w-screen-xl sm:pt-5 md:pt-8 pt-0">
       <div class="border-b border-[#4c566a] mb-5 flex justify-between"></div>
   </div> 
   <div class="flex flex-col items-center ">
       
       <div id="logo">
           <span class="text-[#5e81ac]">ngeran[</span><span class="text-[#ebcb8b]">io</span><span class="text-[#5e81ac]">]</span>
       </div>
       <p class="mt-5 text-center text-sm leading-6 text-slate-500">© Copyright 2024. All rights reserved.</p>
       <div class="mt-4 flex items-center justify-center space-x-4 text-sm font-semibold leading-6 text-slate-700"><a href="/privacy-policy">Privacy policy</a>
           <div class="h-4 w-px bg-slate-500/20"></div><a href="/changelog">Changelog</a>
       </div>
   </div>
</footer>
  </footer>
</body>
</html>

